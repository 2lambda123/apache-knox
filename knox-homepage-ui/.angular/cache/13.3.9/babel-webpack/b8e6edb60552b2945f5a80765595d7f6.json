{"ast":null,"code":"import _classCallCheck from \"/Users/mbalazs/projects/knox/knox-homepage-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/mbalazs/projects/knox/knox-homepage-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HomepageService } from '../homepage.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../homepage.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction SessionInformationComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"a\", 3);\n    i0.ɵɵlistener(\"click\", function SessionInformationComponent_div_2_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      var ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.logout();\n    });\n    i0.ɵɵtext(2, \"logout\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport var SessionInformationComponent = /*#__PURE__*/(function () {\n  var SessionInformationComponent = /*#__PURE__*/function () {\n    function SessionInformationComponent(homepageService) {\n      _classCallCheck(this, SessionInformationComponent);\n\n      this.homepageService = homepageService;\n      this.logoutSupported = true;\n      this['showSessionInformation'] = true;\n    }\n\n    _createClass(SessionInformationComponent, [{\n      key: \"getUser\",\n      value: function getUser() {\n        if (this.sessionInformation) {\n          console.debug('SessionInformationComponent --> getUser() --> ' + this.sessionInformation.user);\n          return this.sessionInformation.user;\n        }\n\n        console.debug('SessionInformationComponent --> getUser() --> dr.who');\n        return 'dr.who';\n      }\n    }, {\n      key: \"getLogoutUrl\",\n      value: function getLogoutUrl() {\n        if (this.sessionInformation) {\n          console.debug('SessionInformationComponent --> getLogoutUrl() --> ' + this.sessionInformation.logoutUrl);\n          return this.sessionInformation.logoutUrl;\n        }\n\n        return null;\n      }\n    }, {\n      key: \"getLogoutPageUrl\",\n      value: function getLogoutPageUrl() {\n        if (this.sessionInformation) {\n          console.debug('SessionInformationComponent --> getLogoutPageUrl() --> ' + this.sessionInformation.logoutPageUrl);\n          return this.sessionInformation.logoutPageUrl;\n        }\n\n        return null;\n      }\n    }, {\n      key: \"logout\",\n      value: function logout() {\n        var _this = this;\n\n        console.debug('SessionInformationComponent --> attempting logout() --> ');\n\n        if (this.sessionInformation) {\n          if (!this.logoutSupported) {\n            window.alert('Logout for the configured is IDP not supported.\\nPlease close all browser windows to logout.');\n          } else {\n            this.homepageService.logout(this.getLogoutUrl()).then(function () {\n              return window.location.assign(_this.sessionInformation.logoutPageUrl);\n            });\n          }\n        }\n      }\n    }, {\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this2 = this;\n\n        console.debug('SessionInformationComponent --> ngOnInit() --> ');\n        this.homepageService.getSessionInformation().then(function (sessionInformation) {\n          return _this2.setSessonInformation(sessionInformation);\n        });\n        console.debug('SessionInformationComponent --> ngOnInit() --> ' + this.sessionInformation);\n      }\n    }, {\n      key: \"setSessonInformation\",\n      value: function setSessonInformation(sessionInformation) {\n        this.sessionInformation = sessionInformation;\n\n        if (this.getLogoutUrl() == null) {\n          this.logoutSupported = false;\n        }\n      }\n    }]);\n\n    return SessionInformationComponent;\n  }();\n\n  SessionInformationComponent.ɵfac = function SessionInformationComponent_Factory(t) {\n    return new (t || SessionInformationComponent)(i0.ɵɵdirectiveInject(i1.HomepageService));\n  };\n\n  SessionInformationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SessionInformationComponent,\n    selectors: [[\"app-session-information\"]],\n    features: [i0.ɵɵProvidersFeature([HomepageService])],\n    decls: 3,\n    vars: 2,\n    consts: [[2, \"text-align\", \"right\", \"color\", \"rgb(130, 180, 93)\"], [\"style\", \"text-align: right;\", 4, \"ngIf\"], [2, \"text-align\", \"right\"], [1, \"btn\", \"btn-primary\", 3, \"click\"]],\n    template: function SessionInformationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtext(1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(2, SessionInformationComponent_div_2_Template, 3, 0, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"Welcome \", ctx.getUser(), \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.logoutSupported);\n      }\n    },\n    directives: [i2.NgIf],\n    encapsulation: 2\n  });\n  return SessionInformationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}