{"ast":null,"code":"import { Component, Input, Output, EventEmitter, ElementRef, HostBinding, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport 'rxjs/add/observable/fromEvent';\nimport 'rxjs/add/observable/merge';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/observable/zip';\nimport 'rxjs/add/operator/do';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/share';\nimport 'rxjs/add/operator/take';\nimport 'rxjs/add/operator/toPromise';\nimport { BsModalHideType, BsModalSize } from './models';\nimport { BsModalService } from './modal-service';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nvar _c0 = [\"*\"];\nvar EVENT_SUFFIX = 'ng2-bs3-modal';\nvar SHOW_EVENT_NAME = \"show.bs.modal.\" + EVENT_SUFFIX;\nvar SHOWN_EVENT_NAME = \"shown.bs.modal.\" + EVENT_SUFFIX;\nvar HIDE_EVENT_NAME = \"hide.bs.modal.\" + EVENT_SUFFIX;\nvar HIDDEN_EVENT_NAME = \"hidden.bs.modal.\" + EVENT_SUFFIX;\nvar LOADED_EVENT_NAME = \"loaded.bs.modal.\" + EVENT_SUFFIX;\nvar DATA_KEY = 'bs.modal';\n\nvar BsModalComponent =\n/** @class */\nfunction () {\n  function BsModalComponent(element, service, zone) {\n    var _this = this;\n\n    this.element = element;\n    this.service = service;\n    this.zone = zone;\n    this.overrideSize = null;\n    this.onInternalClose$ = new Subject();\n    this.subscriptions = [];\n    this.visible = false;\n    this.showing = false;\n    this.hiding = false;\n    this.animation = true;\n    this.backdrop = true;\n    this.keyboard = true;\n    this.onShow = new EventEmitter();\n    this.onOpen = new EventEmitter();\n    this.onHide = new EventEmitter();\n    this.onClose = new EventEmitter();\n    this.onDismiss = new EventEmitter();\n    this.onLoaded = new EventEmitter();\n\n    this.setVisible = function (isVisible) {\n      return function () {\n        _this.visible = isVisible;\n        _this.showing = false;\n        _this.hiding = false;\n      };\n    };\n\n    this.setOptions = function (options) {\n      var backdrop = options.backdrop;\n      if (typeof backdrop === 'string' && backdrop !== 'static') backdrop = true;\n      if (options.backdrop !== undefined) _this.options.backdrop = backdrop;\n      if (options.keyboard !== undefined) _this.options.keyboard = options.keyboard;\n    };\n\n    this.service.add(this);\n    this.init();\n  }\n\n  BsModalComponent.ɵfac = function BsModalComponent_Factory(t) {\n    return new (t || BsModalComponent)();\n  };\n\n  BsModalComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: BsModalComponent,\n    selectors: [[\"bs-modal\"]],\n    inputs: {\n      animation: \"animation\",\n      backdrop: \"backdrop\",\n      keyboard: \"keyboard\",\n      size: \"size\",\n      cssClass: \"cssClass\"\n    },\n    outputs: {\n      onShow: \"onShow\",\n      onOpen: \"onOpen\",\n      onHide: \"onHide\",\n      onClose: \"onClose\",\n      onDismiss: \"onDismiss\",\n      onLoaded: \"onLoaded\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c0,\n    decls: 3,\n    vars: 1,\n    consts: [[1, \"modal-dialog\", 3, \"ngClass\"], [1, \"modal-content\"]],\n    template: function BsModalComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ctx.getCssClasses());\n      }\n    },\n    directives: [ɵngcc1.NgClass],\n    encapsulation: 2\n  });\n  Object.defineProperty(BsModalComponent.prototype, \"options\", {\n    get: function get() {\n      if (!this.$modal) this.init();\n      return this.$modal.data(DATA_KEY).options;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BsModalComponent.prototype, \"fadeClass\", {\n    get: function get() {\n      return this.animation;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BsModalComponent.prototype, \"modalClass\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BsModalComponent.prototype, \"roleAttr\", {\n    get: function get() {\n      return 'dialog';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BsModalComponent.prototype, \"tabindexAttr\", {\n    get: function get() {\n      return '-1';\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  BsModalComponent.prototype.ngOnInit = function () {\n    this.wireUpEventEmitters();\n  };\n\n  BsModalComponent.prototype.ngAfterViewInit = function () {\n    this.$dialog = this.$modal.find('.modal-dialog');\n  };\n\n  BsModalComponent.prototype.ngOnChanges = function () {\n    this.setOptions({\n      backdrop: this.backdrop,\n      keyboard: this.keyboard\n    });\n  };\n\n  BsModalComponent.prototype.ngOnDestroy = function () {\n    this.onInternalClose$.next(BsModalHideType.Destroy);\n    return this.destroy();\n  };\n\n  BsModalComponent.prototype.focus = function () {\n    this.$modal.trigger('focus');\n  };\n\n  BsModalComponent.prototype.routerCanDeactivate = function () {\n    this.onInternalClose$.next(BsModalHideType.RouteChange);\n    return this.destroy();\n  };\n\n  BsModalComponent.prototype.open = function (size) {\n    this.overrideSize = null;\n    if (BsModalSize.isValidSize(size)) this.overrideSize = size;\n    return this.show().toPromise();\n  };\n\n  BsModalComponent.prototype.close = function (value) {\n    var _this = this;\n\n    this.onInternalClose$.next(BsModalHideType.Close);\n    return this.hide().do(function () {\n      return _this.onClose.emit(value);\n    }).toPromise().then(function () {\n      return value;\n    });\n  };\n\n  BsModalComponent.prototype.dismiss = function () {\n    this.onInternalClose$.next(BsModalHideType.Dismiss);\n    return this.hide().toPromise();\n  };\n\n  BsModalComponent.prototype.getCssClasses = function () {\n    var classes = [];\n\n    if (this.isSmall()) {\n      classes.push('modal-sm');\n    }\n\n    if (this.isLarge()) {\n      classes.push('modal-lg');\n    }\n\n    if (this.cssClass) {\n      classes.push(this.cssClass);\n    }\n\n    return classes.join(' ');\n  };\n\n  BsModalComponent.prototype.isSmall = function () {\n    return this.overrideSize !== BsModalSize.Large && this.size === BsModalSize.Small || this.overrideSize === BsModalSize.Small;\n  };\n\n  BsModalComponent.prototype.isLarge = function () {\n    return this.overrideSize !== BsModalSize.Small && this.size === BsModalSize.Large || this.overrideSize === BsModalSize.Large;\n  };\n\n  BsModalComponent.prototype.show = function () {\n    var _this = this;\n\n    if (this.visible && !this.hiding) return Observable.of(null);\n    this.showing = true;\n    return Observable.create(function (o) {\n      _this.onShown$.take(1).subscribe(function (next) {\n        o.next(next);\n        o.complete();\n      });\n\n      _this.transitionFix();\n\n      _this.$modal.modal('show');\n    });\n  };\n\n  BsModalComponent.prototype.transitionFix = function () {\n    var _this = this; // Fix for shown.bs.modal not firing when .fade is present\n    // https://github.com/twbs/bootstrap/issues/11793\n\n\n    if (this.animation) {\n      setTimeout(function () {\n        _this.$modal.trigger('focus').trigger(SHOWN_EVENT_NAME);\n      }, $.fn.modal['Constructor'].TRANSITION_DURATION);\n    }\n  };\n\n  BsModalComponent.prototype.hide = function () {\n    var _this = this;\n\n    if (!this.visible && !this.showing) return Observable.of(null);\n    this.hiding = true;\n    return Observable.create(function (o) {\n      _this.onHidden$.take(1).subscribe(function (next) {\n        o.next(next);\n        o.complete();\n      });\n\n      _this.$modal.modal('hide');\n    });\n  };\n\n  BsModalComponent.prototype.init = function () {\n    var _this = this;\n\n    this.$modal = jQuery(this.element.nativeElement);\n    this.$modal.appendTo(document.body);\n    this.$modal.modal({\n      show: false\n    });\n    this.onShowEvent$ = Observable.fromEvent(this.$modal, SHOW_EVENT_NAME);\n    this.onShownEvent$ = Observable.fromEvent(this.$modal, SHOWN_EVENT_NAME);\n    this.onHideEvent$ = Observable.fromEvent(this.$modal, HIDE_EVENT_NAME);\n    this.onHiddenEvent$ = Observable.fromEvent(this.$modal, HIDDEN_EVENT_NAME);\n    this.onLoadedEvent$ = Observable.fromEvent(this.$modal, LOADED_EVENT_NAME);\n    var onClose$ = Observable.merge(this.onInternalClose$, this.service.onBackdropClose$, this.service.onKeyboardClose$);\n    this.onHide$ = Observable.zip(this.onHideEvent$, onClose$).map(function (x) {\n      return {\n        event: x[0],\n        type: x[1]\n      };\n    });\n    this.onHidden$ = Observable.zip(this.onHiddenEvent$, onClose$).map(function (x) {\n      return x[1];\n    }).do(this.setVisible(false)).do(function () {\n      return _this.service.focusNext();\n    }).share();\n    this.onShown$ = this.onShownEvent$.do(this.setVisible(true)).share();\n    this.onDismiss$ = this.onHidden$.filter(function (x) {\n      return x !== BsModalHideType.Close;\n    }); // Start watching for events\n\n    (_a = this.subscriptions).push.apply(_a, [this.onShown$.subscribe(function () {}), this.onHidden$.subscribe(function () {}), this.service.onModalStack$.subscribe(function () {})]);\n\n    var _a;\n  };\n\n  BsModalComponent.prototype.wireUpEventEmitters = function () {\n    this.wireUpEventEmitter(this.onShow, this.onShowEvent$);\n    this.wireUpEventEmitter(this.onOpen, this.onShown$);\n    this.wireUpEventEmitter(this.onHide, this.onHide$);\n    this.wireUpEventEmitter(this.onDismiss, this.onDismiss$);\n    this.wireUpEventEmitter(this.onLoaded, this.onLoadedEvent$);\n  };\n\n  BsModalComponent.prototype.wireUpEventEmitter = function (emitter, stream$) {\n    var _this = this;\n\n    if (emitter.observers.length === 0) return;\n    var sub = stream$.subscribe(function (next) {\n      _this.zone.run(function () {\n        emitter.next(next);\n      });\n    });\n    this.subscriptions.push(sub);\n  };\n\n  BsModalComponent.prototype.destroy = function () {\n    var _this = this;\n\n    return this.hide().do(function () {\n      _this.service.remove(_this);\n\n      _this.subscriptions.forEach(function (s) {\n        return s.unsubscribe();\n      });\n\n      _this.subscriptions = [];\n\n      if (_this.$modal) {\n        _this.$modal.data(DATA_KEY, null);\n\n        _this.$modal.remove();\n\n        _this.$modal = null;\n      }\n    }).toPromise();\n  };\n  /** @nocollapse */\n\n\n  BsModalComponent.ctorParameters = function () {\n    return [{\n      type: ElementRef\n    }, {\n      type: BsModalService\n    }, {\n      type: NgZone\n    }];\n  };\n\n  BsModalComponent.propDecorators = {\n    'animation': [{\n      type: Input\n    }],\n    'backdrop': [{\n      type: Input\n    }],\n    'keyboard': [{\n      type: Input\n    }],\n    'size': [{\n      type: Input\n    }],\n    'cssClass': [{\n      type: Input\n    }],\n    'onShow': [{\n      type: Output\n    }],\n    'onOpen': [{\n      type: Output\n    }],\n    'onHide': [{\n      type: Output\n    }],\n    'onClose': [{\n      type: Output\n    }],\n    'onDismiss': [{\n      type: Output\n    }],\n    'onLoaded': [{\n      type: Output\n    }],\n    'fadeClass': [{\n      type: HostBinding,\n      args: ['class.fade']\n    }],\n    'modalClass': [{\n      type: HostBinding,\n      args: ['class.modal']\n    }],\n    'roleAttr': [{\n      type: HostBinding,\n      args: ['attr.role']\n    }],\n    'tabindexAttr': [{\n      type: HostBinding,\n      args: ['attr.tabindex']\n    }]\n  };\n\n  (function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BsModalComponent, [{\n      type: Component,\n      args: [{\n        selector: 'bs-modal',\n        template: \"\\n        <div class=\\\"modal-dialog\\\" [ngClass]=\\\"getCssClasses()\\\">\\n            <div class=\\\"modal-content\\\">\\n                <ng-content></ng-content>\\n            </div>\\n        </div>\\n    \"\n      }]\n    }], null, {\n      animation: [{\n        type: Input\n      }],\n      backdrop: [{\n        type: Input\n      }],\n      keyboard: [{\n        type: Input\n      }],\n      onShow: [{\n        type: Output\n      }],\n      onOpen: [{\n        type: Output\n      }],\n      onHide: [{\n        type: Output\n      }],\n      onClose: [{\n        type: Output\n      }],\n      onDismiss: [{\n        type: Output\n      }],\n      onLoaded: [{\n        type: Output\n      }],\n      size: [{\n        type: Input\n      }],\n      cssClass: [{\n        type: Input\n      }]\n    });\n  })();\n\n  return BsModalComponent;\n}();\n\nexport { BsModalComponent };","map":{"version":3,"sources":["/Users/mbalazs/projects/knox/knox-homepage-ui/node_modules/ng2-bs3-modal/__ivy_ngcc__/modal/modal.js"],"names":["Component","Input","Output","EventEmitter","ElementRef","HostBinding","NgZone","Observable","Subject","BsModalHideType","BsModalSize","BsModalService","ɵngcc0","ɵngcc1","_c0","EVENT_SUFFIX","SHOW_EVENT_NAME","SHOWN_EVENT_NAME","HIDE_EVENT_NAME","HIDDEN_EVENT_NAME","LOADED_EVENT_NAME","DATA_KEY","BsModalComponent","element","service","zone","_this","overrideSize","onInternalClose$","subscriptions","visible","showing","hiding","animation","backdrop","keyboard","onShow","onOpen","onHide","onClose","onDismiss","onLoaded","setVisible","isVisible","setOptions","options","undefined","add","init","ɵfac","BsModalComponent_Factory","t","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","size","cssClass","outputs","features","ɵɵNgOnChangesFeature","ngContentSelectors","decls","vars","consts","template","BsModalComponent_Template","rf","ctx","ɵɵprojectionDef","ɵɵelementStart","ɵɵprojection","ɵɵelementEnd","ɵɵproperty","getCssClasses","directives","NgClass","encapsulation","Object","defineProperty","prototype","get","$modal","data","enumerable","configurable","ngOnInit","wireUpEventEmitters","ngAfterViewInit","$dialog","find","ngOnChanges","ngOnDestroy","next","Destroy","destroy","focus","trigger","routerCanDeactivate","RouteChange","open","isValidSize","show","toPromise","close","value","Close","hide","do","emit","then","dismiss","Dismiss","classes","isSmall","push","isLarge","join","Large","Small","of","create","o","onShown$","take","subscribe","complete","transitionFix","modal","setTimeout","$","fn","TRANSITION_DURATION","onHidden$","jQuery","nativeElement","appendTo","document","body","onShowEvent$","fromEvent","onShownEvent$","onHideEvent$","onHiddenEvent$","onLoadedEvent$","onClose$","merge","onBackdropClose$","onKeyboardClose$","onHide$","zip","map","x","event","focusNext","share","onDismiss$","filter","_a","apply","onModalStack$","wireUpEventEmitter","emitter","stream$","observers","length","sub","run","remove","forEach","s","unsubscribe","ctorParameters","propDecorators","args","ngDevMode","ɵsetClassMetadata","selector"],"mappings":"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","sourcesContent":["import { Component, Input, Output, EventEmitter, ElementRef, HostBinding, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport 'rxjs/add/observable/fromEvent';\nimport 'rxjs/add/observable/merge';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/observable/zip';\nimport 'rxjs/add/operator/do';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/share';\nimport 'rxjs/add/operator/take';\nimport 'rxjs/add/operator/toPromise';\nimport { BsModalHideType, BsModalSize } from './models';\nimport { BsModalService } from './modal-service';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\n\nconst _c0 = [\"*\"];\nvar EVENT_SUFFIX = 'ng2-bs3-modal';\nvar SHOW_EVENT_NAME = \"show.bs.modal.\" + EVENT_SUFFIX;\nvar SHOWN_EVENT_NAME = \"shown.bs.modal.\" + EVENT_SUFFIX;\nvar HIDE_EVENT_NAME = \"hide.bs.modal.\" + EVENT_SUFFIX;\nvar HIDDEN_EVENT_NAME = \"hidden.bs.modal.\" + EVENT_SUFFIX;\nvar LOADED_EVENT_NAME = \"loaded.bs.modal.\" + EVENT_SUFFIX;\nvar DATA_KEY = 'bs.modal';\nvar BsModalComponent = /** @class */ (function () {\n    function BsModalComponent(element, service, zone) {\n        var _this = this;\n        this.element = element;\n        this.service = service;\n        this.zone = zone;\n        this.overrideSize = null;\n        this.onInternalClose$ = new Subject();\n        this.subscriptions = [];\n        this.visible = false;\n        this.showing = false;\n        this.hiding = false;\n        this.animation = true;\n        this.backdrop = true;\n        this.keyboard = true;\n        this.onShow = new EventEmitter();\n        this.onOpen = new EventEmitter();\n        this.onHide = new EventEmitter();\n        this.onClose = new EventEmitter();\n        this.onDismiss = new EventEmitter();\n        this.onLoaded = new EventEmitter();\n        this.setVisible = function (isVisible) {\n            return function () {\n                _this.visible = isVisible;\n                _this.showing = false;\n                _this.hiding = false;\n            };\n        };\n        this.setOptions = function (options) {\n            var backdrop = options.backdrop;\n            if (typeof backdrop === 'string' && backdrop !== 'static')\n                backdrop = true;\n            if (options.backdrop !== undefined)\n                _this.options.backdrop = backdrop;\n            if (options.keyboard !== undefined)\n                _this.options.keyboard = options.keyboard;\n        };\n        this.service.add(this);\n        this.init();\n    }\nBsModalComponent.ɵfac = function BsModalComponent_Factory(t) { return new (t || BsModalComponent)(); };\nBsModalComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: BsModalComponent, selectors: [[\"bs-modal\"]], inputs: { animation: \"animation\", backdrop: \"backdrop\", keyboard: \"keyboard\", size: \"size\", cssClass: \"cssClass\" }, outputs: { onShow: \"onShow\", onOpen: \"onOpen\", onHide: \"onHide\", onClose: \"onClose\", onDismiss: \"onDismiss\", onLoaded: \"onLoaded\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c0, decls: 3, vars: 1, consts: [[1, \"modal-dialog\", 3, \"ngClass\"], [1, \"modal-content\"]], template: function BsModalComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd()();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ctx.getCssClasses());\n    } }, directives: [ɵngcc1.NgClass], encapsulation: 2 });\n    Object.defineProperty(BsModalComponent.prototype, \"options\", {\n        get: function () {\n            if (!this.$modal)\n                this.init();\n            return this.$modal.data(DATA_KEY).options;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"fadeClass\", {\n        get: function () { return this.animation; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"modalClass\", {\n        get: function () { return true; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"roleAttr\", {\n        get: function () { return 'dialog'; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"tabindexAttr\", {\n        get: function () { return '-1'; },\n        enumerable: true,\n        configurable: true\n    });\n    BsModalComponent.prototype.ngOnInit = function () {\n        this.wireUpEventEmitters();\n    };\n    BsModalComponent.prototype.ngAfterViewInit = function () {\n        this.$dialog = this.$modal.find('.modal-dialog');\n    };\n    BsModalComponent.prototype.ngOnChanges = function () {\n        this.setOptions({\n            backdrop: this.backdrop,\n            keyboard: this.keyboard\n        });\n    };\n    BsModalComponent.prototype.ngOnDestroy = function () {\n        this.onInternalClose$.next(BsModalHideType.Destroy);\n        return this.destroy();\n    };\n    BsModalComponent.prototype.focus = function () {\n        this.$modal.trigger('focus');\n    };\n    BsModalComponent.prototype.routerCanDeactivate = function () {\n        this.onInternalClose$.next(BsModalHideType.RouteChange);\n        return this.destroy();\n    };\n    BsModalComponent.prototype.open = function (size) {\n        this.overrideSize = null;\n        if (BsModalSize.isValidSize(size))\n            this.overrideSize = size;\n        return this.show().toPromise();\n    };\n    BsModalComponent.prototype.close = function (value) {\n        var _this = this;\n        this.onInternalClose$.next(BsModalHideType.Close);\n        return this.hide()\n            .do(function () { return _this.onClose.emit(value); })\n            .toPromise()\n            .then(function () { return value; });\n    };\n    BsModalComponent.prototype.dismiss = function () {\n        this.onInternalClose$.next(BsModalHideType.Dismiss);\n        return this.hide().toPromise();\n    };\n    BsModalComponent.prototype.getCssClasses = function () {\n        var classes = [];\n        if (this.isSmall()) {\n            classes.push('modal-sm');\n        }\n        if (this.isLarge()) {\n            classes.push('modal-lg');\n        }\n        if (this.cssClass) {\n            classes.push(this.cssClass);\n        }\n        return classes.join(' ');\n    };\n    BsModalComponent.prototype.isSmall = function () {\n        return this.overrideSize !== BsModalSize.Large\n            && this.size === BsModalSize.Small\n            || this.overrideSize === BsModalSize.Small;\n    };\n    BsModalComponent.prototype.isLarge = function () {\n        return this.overrideSize !== BsModalSize.Small\n            && this.size === BsModalSize.Large\n            || this.overrideSize === BsModalSize.Large;\n    };\n    BsModalComponent.prototype.show = function () {\n        var _this = this;\n        if (this.visible && !this.hiding)\n            return Observable.of(null);\n        this.showing = true;\n        return Observable.create(function (o) {\n            _this.onShown$.take(1).subscribe(function (next) {\n                o.next(next);\n                o.complete();\n            });\n            _this.transitionFix();\n            _this.$modal.modal('show');\n        });\n    };\n    BsModalComponent.prototype.transitionFix = function () {\n        var _this = this;\n        // Fix for shown.bs.modal not firing when .fade is present\n        // https://github.com/twbs/bootstrap/issues/11793\n        if (this.animation) {\n            setTimeout(function () {\n                _this.$modal.trigger('focus').trigger(SHOWN_EVENT_NAME);\n            }, $.fn.modal['Constructor'].TRANSITION_DURATION);\n        }\n    };\n    BsModalComponent.prototype.hide = function () {\n        var _this = this;\n        if (!this.visible && !this.showing)\n            return Observable.of(null);\n        this.hiding = true;\n        return Observable.create(function (o) {\n            _this.onHidden$.take(1).subscribe(function (next) {\n                o.next(next);\n                o.complete();\n            });\n            _this.$modal.modal('hide');\n        });\n    };\n    BsModalComponent.prototype.init = function () {\n        var _this = this;\n        this.$modal = jQuery(this.element.nativeElement);\n        this.$modal.appendTo(document.body);\n        this.$modal.modal({\n            show: false\n        });\n        this.onShowEvent$ = Observable.fromEvent(this.$modal, SHOW_EVENT_NAME);\n        this.onShownEvent$ = Observable.fromEvent(this.$modal, SHOWN_EVENT_NAME);\n        this.onHideEvent$ = Observable.fromEvent(this.$modal, HIDE_EVENT_NAME);\n        this.onHiddenEvent$ = Observable.fromEvent(this.$modal, HIDDEN_EVENT_NAME);\n        this.onLoadedEvent$ = Observable.fromEvent(this.$modal, LOADED_EVENT_NAME);\n        var onClose$ = Observable\n            .merge(this.onInternalClose$, this.service.onBackdropClose$, this.service.onKeyboardClose$);\n        this.onHide$ = Observable.zip(this.onHideEvent$, onClose$)\n            .map(function (x) { return ({ event: x[0], type: x[1] }); });\n        this.onHidden$ = Observable.zip(this.onHiddenEvent$, onClose$)\n            .map(function (x) { return x[1]; })\n            .do(this.setVisible(false))\n            .do(function () { return _this.service.focusNext(); })\n            .share();\n        this.onShown$ = this.onShownEvent$\n            .do(this.setVisible(true))\n            .share();\n        this.onDismiss$ = this.onHidden$\n            .filter(function (x) { return x !== BsModalHideType.Close; });\n        // Start watching for events\n        (_a = this.subscriptions).push.apply(_a, [\n            this.onShown$.subscribe(function () { }),\n            this.onHidden$.subscribe(function () { }),\n            this.service.onModalStack$.subscribe(function () { })\n        ]);\n        var _a;\n    };\n    BsModalComponent.prototype.wireUpEventEmitters = function () {\n        this.wireUpEventEmitter(this.onShow, this.onShowEvent$);\n        this.wireUpEventEmitter(this.onOpen, this.onShown$);\n        this.wireUpEventEmitter(this.onHide, this.onHide$);\n        this.wireUpEventEmitter(this.onDismiss, this.onDismiss$);\n        this.wireUpEventEmitter(this.onLoaded, this.onLoadedEvent$);\n    };\n    BsModalComponent.prototype.wireUpEventEmitter = function (emitter, stream$) {\n        var _this = this;\n        if (emitter.observers.length === 0)\n            return;\n        var sub = stream$.subscribe(function (next) {\n            _this.zone.run(function () {\n                emitter.next(next);\n            });\n        });\n        this.subscriptions.push(sub);\n    };\n    BsModalComponent.prototype.destroy = function () {\n        var _this = this;\n        return this.hide().do(function () {\n            _this.service.remove(_this);\n            _this.subscriptions.forEach(function (s) { return s.unsubscribe(); });\n            _this.subscriptions = [];\n            if (_this.$modal) {\n                _this.$modal.data(DATA_KEY, null);\n                _this.$modal.remove();\n                _this.$modal = null;\n            }\n        }).toPromise();\n    };\n    /** @nocollapse */\n    BsModalComponent.ctorParameters = function () { return [\n        { type: ElementRef, },\n        { type: BsModalService, },\n        { type: NgZone, },\n    ]; };\n    BsModalComponent.propDecorators = {\n        'animation': [{ type: Input },],\n        'backdrop': [{ type: Input },],\n        'keyboard': [{ type: Input },],\n        'size': [{ type: Input },],\n        'cssClass': [{ type: Input },],\n        'onShow': [{ type: Output },],\n        'onOpen': [{ type: Output },],\n        'onHide': [{ type: Output },],\n        'onClose': [{ type: Output },],\n        'onDismiss': [{ type: Output },],\n        'onLoaded': [{ type: Output },],\n        'fadeClass': [{ type: HostBinding, args: ['class.fade',] },],\n        'modalClass': [{ type: HostBinding, args: ['class.modal',] },],\n        'roleAttr': [{ type: HostBinding, args: ['attr.role',] },],\n        'tabindexAttr': [{ type: HostBinding, args: ['attr.tabindex',] },],\n    };\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BsModalComponent, [{\n        type: Component,\n        args: [{\n                selector: 'bs-modal',\n                template: \"\\n        <div class=\\\"modal-dialog\\\" [ngClass]=\\\"getCssClasses()\\\">\\n            <div class=\\\"modal-content\\\">\\n                <ng-content></ng-content>\\n            </div>\\n        </div>\\n    \"\n            }]\n    }], null, { animation: [{\n            type: Input\n        }], backdrop: [{\n            type: Input\n        }], keyboard: [{\n            type: Input\n        }], onShow: [{\n            type: Output\n        }], onOpen: [{\n            type: Output\n        }], onHide: [{\n            type: Output\n        }], onClose: [{\n            type: Output\n        }], onDismiss: [{\n            type: Output\n        }], onLoaded: [{\n            type: Output\n        }], size: [{\n            type: Input\n        }], cssClass: [{\n            type: Input\n        }] }); })();\n    return BsModalComponent;\n}());\nexport { BsModalComponent };\n\n"]},"metadata":{},"sourceType":"module"}