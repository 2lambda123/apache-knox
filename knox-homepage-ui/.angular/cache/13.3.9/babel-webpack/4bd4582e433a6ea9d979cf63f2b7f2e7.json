{"ast":null,"code":"import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/observable/fromEvent';\nimport 'rxjs/add/operator/filter';\nimport { BsModalHideType } from './models';\nvar EVENT_SUFFIX = 'ng2-bs3-modal';\nvar KEYUP_EVENT_NAME = \"keyup.\" + EVENT_SUFFIX;\nvar CLICK_EVENT_NAME = \"click.\" + EVENT_SUFFIX;\nvar SHOW_EVENT_NAME = \"show.bs.modal.\" + EVENT_SUFFIX;\n\nvar BsModalService =\n/** @class */\nfunction () {\n  function BsModalService() {\n    var _this = this;\n\n    this.modals = [];\n    this.$body = jQuery(document.body);\n    this.onBackdropClose$ = Observable.fromEvent(this.$body, CLICK_EVENT_NAME).filter(function (e) {\n      return jQuery(e.target).is('.modal');\n    }).map(function () {\n      return BsModalHideType.Backdrop;\n    }).share();\n    this.onKeyboardClose$ = Observable.fromEvent(this.$body, KEYUP_EVENT_NAME).filter(function (e) {\n      return e.which === 27;\n    }).map(function () {\n      return BsModalHideType.Keyboard;\n    }).share();\n    this.onModalStack$ = Observable.fromEvent(this.$body, SHOW_EVENT_NAME).do(function () {\n      var zIndex = 1040 + 10 * $('.modal:visible').length;\n      $(_this).css('z-index', zIndex);\n      setTimeout(function () {\n        $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');\n      }, 0);\n    }).share();\n  }\n\n  BsModalService.prototype.add = function (modal) {\n    this.modals.push(modal);\n  };\n\n  BsModalService.prototype.remove = function (modal) {\n    var index = this.modals.indexOf(modal);\n    if (index > -1) this.modals.splice(index, 1);\n  };\n\n  BsModalService.prototype.focusNext = function () {\n    var visible = this.modals.filter(function (m) {\n      return m.visible;\n    });\n\n    if (visible.length) {\n      this.$body.addClass('modal-open');\n      visible[visible.length - 1].focus();\n    }\n  };\n\n  BsModalService.prototype.dismissAll = function () {\n    return Promise.all(this.modals.map(function (m) {\n      return m.dismiss();\n    }));\n  };\n\n  BsModalService.decorators = [{\n    type: Injectable\n  }];\n  /** @nocollapse */\n\n  BsModalService.ctorParameters = function () {\n    return [];\n  };\n\n  return BsModalService;\n}();\n\nexport { BsModalService };","map":{"version":3,"sources":["/Users/mbalazs/projects/knox/knox-homepage-ui/node_modules/ng2-bs3-modal/modal/modal-service.js"],"names":["Injectable","Observable","BsModalHideType","EVENT_SUFFIX","KEYUP_EVENT_NAME","CLICK_EVENT_NAME","SHOW_EVENT_NAME","BsModalService","_this","modals","$body","jQuery","document","body","onBackdropClose$","fromEvent","filter","e","target","is","map","Backdrop","share","onKeyboardClose$","which","Keyboard","onModalStack$","do","zIndex","$","length","css","setTimeout","not","addClass","prototype","add","modal","push","remove","index","indexOf","splice","focusNext","visible","m","focus","dismissAll","Promise","all","dismiss","decorators","type","ctorParameters"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/observable/fromEvent';\nimport 'rxjs/add/operator/filter';\nimport { BsModalHideType } from './models';\nvar EVENT_SUFFIX = 'ng2-bs3-modal';\nvar KEYUP_EVENT_NAME = \"keyup.\" + EVENT_SUFFIX;\nvar CLICK_EVENT_NAME = \"click.\" + EVENT_SUFFIX;\nvar SHOW_EVENT_NAME = \"show.bs.modal.\" + EVENT_SUFFIX;\nvar BsModalService = /** @class */ (function () {\n    function BsModalService() {\n        var _this = this;\n        this.modals = [];\n        this.$body = jQuery(document.body);\n        this.onBackdropClose$ = Observable.fromEvent(this.$body, CLICK_EVENT_NAME)\n            .filter(function (e) { return jQuery(e.target).is('.modal'); })\n            .map(function () { return BsModalHideType.Backdrop; })\n            .share();\n        this.onKeyboardClose$ = Observable.fromEvent(this.$body, KEYUP_EVENT_NAME)\n            .filter(function (e) { return e.which === 27; })\n            .map(function () { return BsModalHideType.Keyboard; })\n            .share();\n        this.onModalStack$ = Observable.fromEvent(this.$body, SHOW_EVENT_NAME)\n            .do(function () {\n            var zIndex = 1040 + (10 * $('.modal:visible').length);\n            $(_this).css('z-index', zIndex);\n            setTimeout(function () {\n                $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');\n            }, 0);\n        })\n            .share();\n    }\n    BsModalService.prototype.add = function (modal) {\n        this.modals.push(modal);\n    };\n    BsModalService.prototype.remove = function (modal) {\n        var index = this.modals.indexOf(modal);\n        if (index > -1)\n            this.modals.splice(index, 1);\n    };\n    BsModalService.prototype.focusNext = function () {\n        var visible = this.modals.filter(function (m) { return m.visible; });\n        if (visible.length) {\n            this.$body.addClass('modal-open');\n            visible[visible.length - 1].focus();\n        }\n    };\n    BsModalService.prototype.dismissAll = function () {\n        return Promise.all(this.modals.map(function (m) {\n            return m.dismiss();\n        }));\n    };\n    BsModalService.decorators = [\n        { type: Injectable },\n    ];\n    /** @nocollapse */\n    BsModalService.ctorParameters = function () { return []; };\n    return BsModalService;\n}());\nexport { BsModalService };\n"]},"metadata":{},"sourceType":"module"}