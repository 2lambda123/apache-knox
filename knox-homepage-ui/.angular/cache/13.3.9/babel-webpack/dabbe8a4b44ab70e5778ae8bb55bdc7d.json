{"ast":null,"code":"import _classCallCheck from \"/Users/mbalazs/projects/knox/knox-homepage-ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/mbalazs/projects/knox/knox-homepage-ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { ActivatedRoute } from '@angular/router';\nimport { HomepageService } from '../homepage.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../homepage.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\n\nfunction GeneralProxyInformationComponent_div_4_tr_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Knox Version\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.getVersion());\n  }\n}\n\nfunction GeneralProxyInformationComponent_div_4_tr_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"TLS Public Certificate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"a\", 7);\n    i0.ɵɵtext(5, \"PEM\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \" \\xA0\\xA0|\\xA0\\xA0 \");\n    i0.ɵɵelementStart(7, \"a\", 7);\n    i0.ɵɵtext(8, \"JKS\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r2.getMetadataAPIUrl(\"publicCert?type=pem\"), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r2.getMetadataAPIUrl(\"publicCert?type=jks\"), i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction GeneralProxyInformationComponent_div_4_tr_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Admin UI URL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"a\", 8);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r3.getAdminUiUrl(), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.getAdminUiUrl());\n  }\n}\n\nfunction GeneralProxyInformationComponent_div_4_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" Admin API Details \");\n    i0.ɵɵelement(3, \"span\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\")(5, \"a\", 8);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r4.getAdminApiDescription());\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r4.getAdminApiBookUrl(), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r4.getAdminApiBookUrl());\n  }\n}\n\nfunction GeneralProxyInformationComponent_div_4_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" Metadata API \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"a\", 8);\n    i0.ɵɵtext(5, \"General Proxy Information\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \" \\xA0\\xA0|\\xA0\\xA0 \");\n    i0.ɵɵelementStart(7, \"a\", 8);\n    i0.ɵɵtext(8, \"Topologies\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r5.getMetadataAPIUrl(\"info\"), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r5.getMetadataAPIUrl(\"topologies\"), i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction GeneralProxyInformationComponent_div_4_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" Integration Tokens \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"a\", 8);\n    i0.ɵɵtext(5, \"Token Management\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \" \\xA0\\xA0|\\xA0\\xA0 \");\n    i0.ɵɵelementStart(7, \"a\", 8);\n    i0.ɵɵtext(8, \"Token Generation\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r6.getTokenManagementUrl(), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r6.getTokenGenerationUrl(), i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction GeneralProxyInformationComponent_div_4_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Web Shell\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"a\", 8);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r7.getWebShellUrl(), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r7.getWebShellUrl());\n  }\n}\n\nfunction GeneralProxyInformationComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"table\", 3)(2, \"colgroup\");\n    i0.ɵɵelement(3, \"col\", 4)(4, \"col\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"tbody\");\n    i0.ɵɵtemplate(6, GeneralProxyInformationComponent_div_4_tr_6_Template, 5, 1, \"tr\", 6);\n    i0.ɵɵtemplate(7, GeneralProxyInformationComponent_div_4_tr_7_Template, 9, 2, \"tr\", 6);\n    i0.ɵɵtemplate(8, GeneralProxyInformationComponent_div_4_tr_8_Template, 6, 2, \"tr\", 6);\n    i0.ɵɵtemplate(9, GeneralProxyInformationComponent_div_4_tr_9_Template, 7, 3, \"tr\", 6);\n    i0.ɵɵtemplate(10, GeneralProxyInformationComponent_div_4_tr_10_Template, 9, 2, \"tr\", 6);\n    i0.ɵɵtemplate(11, GeneralProxyInformationComponent_div_4_tr_11_Template, 9, 2, \"tr\", 6);\n    i0.ɵɵtemplate(12, GeneralProxyInformationComponent_div_4_tr_12_Template, 6, 2, \"tr\", 6);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0[\"showKnoxVersion\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0[\"showPublicCerts\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0[\"showAdminUI\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0[\"showAdminAPI\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0[\"showMetadataAPI\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isTokenManagementEnabled() && ctx_r0[\"showTokens\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isWebshellEnabled() && ctx_r0[\"showWebShell\"]);\n  }\n}\n\nexport var GeneralProxyInformationComponent = /*#__PURE__*/(function () {\n  var GeneralProxyInformationComponent = /*#__PURE__*/function () {\n    function GeneralProxyInformationComponent(homepageService, route) {\n      _classCallCheck(this, GeneralProxyInformationComponent);\n\n      this.homepageService = homepageService;\n      this.route = route;\n      this['showGeneralProxyInformation'] = false;\n      this['showKnoxVersion'] = true;\n      this['showPublicCerts'] = true;\n      this['showAdminUI'] = true;\n      this['showAdminAPI'] = true;\n      this['showMetadataAPI'] = true;\n      this['showTokens'] = true;\n      this['showWebShell'] = true;\n    }\n\n    _createClass(GeneralProxyInformationComponent, [{\n      key: \"getVersion\",\n      value: function getVersion() {\n        if (this.generalProxyInformation) {\n          return this.generalProxyInformation.version;\n        }\n\n        return '';\n      }\n    }, {\n      key: \"getAdminUiUrl\",\n      value: function getAdminUiUrl() {\n        if (this.generalProxyInformation) {\n          return this.generalProxyInformation.adminUiUrl;\n        }\n\n        return '';\n      }\n    }, {\n      key: \"getWebShellUrl\",\n      value: function getWebShellUrl() {\n        if (this.generalProxyInformation) {\n          return this.generalProxyInformation.webShellUrl;\n        }\n\n        return '';\n      }\n    }, {\n      key: \"getMetadataAPIUrl\",\n      value: function getMetadataAPIUrl(endpoint) {\n        return this.getAdminUiUrl().replace('manager/admin-ui/', 'metadata/api/v1/metadata/' + endpoint);\n      }\n    }, {\n      key: \"getAdminApiDescription\",\n      value: function getAdminApiDescription() {\n        return 'Knox provides a REST API which allows end-users executing CRUD operations on topologies/shared-porviders/descriptors/' + 'service definitions as well as fetching the Knox version.';\n      }\n    }, {\n      key: \"getAdminApiBookUrl\",\n      value: function getAdminApiBookUrl() {\n        if (this.generalProxyInformation) {\n          return this.generalProxyInformation.adminApiBookUrl;\n        }\n\n        return '';\n      }\n    }, {\n      key: \"getTokenGenerationUrl\",\n      value: function getTokenGenerationUrl() {\n        return this.getAdminUiUrl().replace(new RegExp('manager/admin-ui/*'), 'homepage/token-generation/index.html');\n      }\n    }, {\n      key: \"getTokenManagementUrl\",\n      value: function getTokenManagementUrl() {\n        return this.getAdminUiUrl().replace(new RegExp('manager/admin-ui/*'), 'homepage/token-management/index.html');\n      }\n    }, {\n      key: \"isTokenManagementEnabled\",\n      value: function isTokenManagementEnabled() {\n        if (this.generalProxyInformation) {\n          return this.generalProxyInformation.enableTokenManagement === 'true';\n        }\n\n        return false;\n      }\n    }, {\n      key: \"isWebshellEnabled\",\n      value: function isWebshellEnabled() {\n        if (this.generalProxyInformation) {\n          return this.generalProxyInformation.enableWebshell === 'true';\n        }\n\n        return false;\n      }\n    }, {\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        var _this = this;\n\n        console.debug('GeneralProxyInformationComponent --> ngOnInit() --> ');\n        this.homepageService.getGeneralProxyInformation().then(function (generalProxyInformation) {\n          return _this.generalProxyInformation = generalProxyInformation;\n        });\n        var profileName;\n        this.route.queryParams.subscribe(function (params) {\n          profileName = params['profile'];\n          console.debug('Profile name = ' + profileName);\n\n          if (profileName) {\n            console.debug('Fetching profile information...');\n\n            _this.homepageService.getProfile(profileName).then(function (profile) {\n              return _this.setProfileFlags(profile);\n            });\n          }\n        });\n      }\n    }, {\n      key: \"setProfileFlags\",\n      value: function setProfileFlags(profile) {\n        console.debug('Setting GPI profile flags...');\n        this['showKnoxVersion'] = profile['gpi_version'] === 'true';\n        this['showPublicCerts'] = profile['gpi_cert'] === 'true';\n        this['showAdminUI'] = profile['gpi_admin_ui'] === 'true';\n        this['showAdminAPI'] = profile['gpi_admin_api'] === 'true';\n        this['showMetadataAPI'] = profile['gpi_md_api'] === 'true';\n        this['showTokens'] = profile['gpi_tokens'] === 'true';\n        this['showWebShell'] = profile['gpi_webshell'] === 'true';\n      }\n    }, {\n      key: \"toggleBoolean\",\n      value: function toggleBoolean(propertyName) {\n        this[propertyName] = !this[propertyName];\n      }\n    }]);\n\n    return GeneralProxyInformationComponent;\n  }();\n\n  GeneralProxyInformationComponent.ɵfac = function GeneralProxyInformationComponent_Factory(t) {\n    return new (t || GeneralProxyInformationComponent)(i0.ɵɵdirectiveInject(i1.HomepageService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  GeneralProxyInformationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GeneralProxyInformationComponent,\n    selectors: [[\"app-general-proxy-information\"]],\n    features: [i0.ɵɵProvidersFeature([HomepageService])],\n    decls: 5,\n    vars: 3,\n    consts: [[3, \"click\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\", \"table-hover\"], [\"width\", \"30%\"], [\"width\", \"70%\"], [4, \"ngIf\"], [3, \"href\"], [\"target\", \"_blank\", 3, \"href\"], [\"data-toggle\", \"tooltip\", 1, \"inline-glyph\", \"glyphicon\", \"glyphicon-info-sign\", \"btn\", \"btn-xs\", 3, \"title\"]],\n    template: function GeneralProxyInformationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\")(1, \"h4\", 0);\n        i0.ɵɵlistener(\"click\", function GeneralProxyInformationComponent_Template_h4_click_1_listener() {\n          return ctx.toggleBoolean(\"showGeneralProxyInformation\");\n        });\n        i0.ɵɵelement(2, \"span\");\n        i0.ɵɵtext(3, \"\\xA0General Proxy Information\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(4, GeneralProxyInformationComponent_div_4_Template, 13, 7, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassMap(\"clickable inline-glyph glyhpicon glyphicon-\" + (ctx[\"showGeneralProxyInformation\"] ? \"minus\" : \"plus\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx[\"showGeneralProxyInformation\"]);\n      }\n    },\n    directives: [i3.NgIf],\n    encapsulation: 2\n  });\n  return GeneralProxyInformationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}