{"ast":null,"code":"import { Component, Input, Output, EventEmitter, ElementRef, HostBinding, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport 'rxjs/add/observable/fromEvent';\nimport 'rxjs/add/observable/merge';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/observable/zip';\nimport 'rxjs/add/operator/do';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/share';\nimport 'rxjs/add/operator/take';\nimport 'rxjs/add/operator/toPromise';\nimport { BsModalHideType, BsModalSize } from './models';\nimport { BsModalService } from './modal-service';\nvar EVENT_SUFFIX = 'ng2-bs3-modal';\nvar SHOW_EVENT_NAME = \"show.bs.modal.\" + EVENT_SUFFIX;\nvar SHOWN_EVENT_NAME = \"shown.bs.modal.\" + EVENT_SUFFIX;\nvar HIDE_EVENT_NAME = \"hide.bs.modal.\" + EVENT_SUFFIX;\nvar HIDDEN_EVENT_NAME = \"hidden.bs.modal.\" + EVENT_SUFFIX;\nvar LOADED_EVENT_NAME = \"loaded.bs.modal.\" + EVENT_SUFFIX;\nvar DATA_KEY = 'bs.modal';\n\nvar BsModalComponent =\n/** @class */\nfunction () {\n  function BsModalComponent(element, service, zone) {\n    var _this = this;\n\n    this.element = element;\n    this.service = service;\n    this.zone = zone;\n    this.overrideSize = null;\n    this.onInternalClose$ = new Subject();\n    this.subscriptions = [];\n    this.visible = false;\n    this.showing = false;\n    this.hiding = false;\n    this.animation = true;\n    this.backdrop = true;\n    this.keyboard = true;\n    this.onShow = new EventEmitter();\n    this.onOpen = new EventEmitter();\n    this.onHide = new EventEmitter();\n    this.onClose = new EventEmitter();\n    this.onDismiss = new EventEmitter();\n    this.onLoaded = new EventEmitter();\n\n    this.setVisible = function (isVisible) {\n      return function () {\n        _this.visible = isVisible;\n        _this.showing = false;\n        _this.hiding = false;\n      };\n    };\n\n    this.setOptions = function (options) {\n      var backdrop = options.backdrop;\n      if (typeof backdrop === 'string' && backdrop !== 'static') backdrop = true;\n      if (options.backdrop !== undefined) _this.options.backdrop = backdrop;\n      if (options.keyboard !== undefined) _this.options.keyboard = options.keyboard;\n    };\n\n    this.service.add(this);\n    this.init();\n  }\n\n  Object.defineProperty(BsModalComponent.prototype, \"options\", {\n    get: function get() {\n      if (!this.$modal) this.init();\n      return this.$modal.data(DATA_KEY).options;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BsModalComponent.prototype, \"fadeClass\", {\n    get: function get() {\n      return this.animation;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BsModalComponent.prototype, \"modalClass\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BsModalComponent.prototype, \"roleAttr\", {\n    get: function get() {\n      return 'dialog';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(BsModalComponent.prototype, \"tabindexAttr\", {\n    get: function get() {\n      return '-1';\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  BsModalComponent.prototype.ngOnInit = function () {\n    this.wireUpEventEmitters();\n  };\n\n  BsModalComponent.prototype.ngAfterViewInit = function () {\n    this.$dialog = this.$modal.find('.modal-dialog');\n  };\n\n  BsModalComponent.prototype.ngOnChanges = function () {\n    this.setOptions({\n      backdrop: this.backdrop,\n      keyboard: this.keyboard\n    });\n  };\n\n  BsModalComponent.prototype.ngOnDestroy = function () {\n    this.onInternalClose$.next(BsModalHideType.Destroy);\n    return this.destroy();\n  };\n\n  BsModalComponent.prototype.focus = function () {\n    this.$modal.trigger('focus');\n  };\n\n  BsModalComponent.prototype.routerCanDeactivate = function () {\n    this.onInternalClose$.next(BsModalHideType.RouteChange);\n    return this.destroy();\n  };\n\n  BsModalComponent.prototype.open = function (size) {\n    this.overrideSize = null;\n    if (BsModalSize.isValidSize(size)) this.overrideSize = size;\n    return this.show().toPromise();\n  };\n\n  BsModalComponent.prototype.close = function (value) {\n    var _this = this;\n\n    this.onInternalClose$.next(BsModalHideType.Close);\n    return this.hide().do(function () {\n      return _this.onClose.emit(value);\n    }).toPromise().then(function () {\n      return value;\n    });\n  };\n\n  BsModalComponent.prototype.dismiss = function () {\n    this.onInternalClose$.next(BsModalHideType.Dismiss);\n    return this.hide().toPromise();\n  };\n\n  BsModalComponent.prototype.getCssClasses = function () {\n    var classes = [];\n\n    if (this.isSmall()) {\n      classes.push('modal-sm');\n    }\n\n    if (this.isLarge()) {\n      classes.push('modal-lg');\n    }\n\n    if (this.cssClass) {\n      classes.push(this.cssClass);\n    }\n\n    return classes.join(' ');\n  };\n\n  BsModalComponent.prototype.isSmall = function () {\n    return this.overrideSize !== BsModalSize.Large && this.size === BsModalSize.Small || this.overrideSize === BsModalSize.Small;\n  };\n\n  BsModalComponent.prototype.isLarge = function () {\n    return this.overrideSize !== BsModalSize.Small && this.size === BsModalSize.Large || this.overrideSize === BsModalSize.Large;\n  };\n\n  BsModalComponent.prototype.show = function () {\n    var _this = this;\n\n    if (this.visible && !this.hiding) return Observable.of(null);\n    this.showing = true;\n    return Observable.create(function (o) {\n      _this.onShown$.take(1).subscribe(function (next) {\n        o.next(next);\n        o.complete();\n      });\n\n      _this.transitionFix();\n\n      _this.$modal.modal('show');\n    });\n  };\n\n  BsModalComponent.prototype.transitionFix = function () {\n    var _this = this; // Fix for shown.bs.modal not firing when .fade is present\n    // https://github.com/twbs/bootstrap/issues/11793\n\n\n    if (this.animation) {\n      setTimeout(function () {\n        _this.$modal.trigger('focus').trigger(SHOWN_EVENT_NAME);\n      }, $.fn.modal['Constructor'].TRANSITION_DURATION);\n    }\n  };\n\n  BsModalComponent.prototype.hide = function () {\n    var _this = this;\n\n    if (!this.visible && !this.showing) return Observable.of(null);\n    this.hiding = true;\n    return Observable.create(function (o) {\n      _this.onHidden$.take(1).subscribe(function (next) {\n        o.next(next);\n        o.complete();\n      });\n\n      _this.$modal.modal('hide');\n    });\n  };\n\n  BsModalComponent.prototype.init = function () {\n    var _this = this;\n\n    this.$modal = jQuery(this.element.nativeElement);\n    this.$modal.appendTo(document.body);\n    this.$modal.modal({\n      show: false\n    });\n    this.onShowEvent$ = Observable.fromEvent(this.$modal, SHOW_EVENT_NAME);\n    this.onShownEvent$ = Observable.fromEvent(this.$modal, SHOWN_EVENT_NAME);\n    this.onHideEvent$ = Observable.fromEvent(this.$modal, HIDE_EVENT_NAME);\n    this.onHiddenEvent$ = Observable.fromEvent(this.$modal, HIDDEN_EVENT_NAME);\n    this.onLoadedEvent$ = Observable.fromEvent(this.$modal, LOADED_EVENT_NAME);\n    var onClose$ = Observable.merge(this.onInternalClose$, this.service.onBackdropClose$, this.service.onKeyboardClose$);\n    this.onHide$ = Observable.zip(this.onHideEvent$, onClose$).map(function (x) {\n      return {\n        event: x[0],\n        type: x[1]\n      };\n    });\n    this.onHidden$ = Observable.zip(this.onHiddenEvent$, onClose$).map(function (x) {\n      return x[1];\n    }).do(this.setVisible(false)).do(function () {\n      return _this.service.focusNext();\n    }).share();\n    this.onShown$ = this.onShownEvent$.do(this.setVisible(true)).share();\n    this.onDismiss$ = this.onHidden$.filter(function (x) {\n      return x !== BsModalHideType.Close;\n    }); // Start watching for events\n\n    (_a = this.subscriptions).push.apply(_a, [this.onShown$.subscribe(function () {}), this.onHidden$.subscribe(function () {}), this.service.onModalStack$.subscribe(function () {})]);\n\n    var _a;\n  };\n\n  BsModalComponent.prototype.wireUpEventEmitters = function () {\n    this.wireUpEventEmitter(this.onShow, this.onShowEvent$);\n    this.wireUpEventEmitter(this.onOpen, this.onShown$);\n    this.wireUpEventEmitter(this.onHide, this.onHide$);\n    this.wireUpEventEmitter(this.onDismiss, this.onDismiss$);\n    this.wireUpEventEmitter(this.onLoaded, this.onLoadedEvent$);\n  };\n\n  BsModalComponent.prototype.wireUpEventEmitter = function (emitter, stream$) {\n    var _this = this;\n\n    if (emitter.observers.length === 0) return;\n    var sub = stream$.subscribe(function (next) {\n      _this.zone.run(function () {\n        emitter.next(next);\n      });\n    });\n    this.subscriptions.push(sub);\n  };\n\n  BsModalComponent.prototype.destroy = function () {\n    var _this = this;\n\n    return this.hide().do(function () {\n      _this.service.remove(_this);\n\n      _this.subscriptions.forEach(function (s) {\n        return s.unsubscribe();\n      });\n\n      _this.subscriptions = [];\n\n      if (_this.$modal) {\n        _this.$modal.data(DATA_KEY, null);\n\n        _this.$modal.remove();\n\n        _this.$modal = null;\n      }\n    }).toPromise();\n  };\n\n  BsModalComponent.decorators = [{\n    type: Component,\n    args: [{\n      selector: 'bs-modal',\n      template: \"\\n        <div class=\\\"modal-dialog\\\" [ngClass]=\\\"getCssClasses()\\\">\\n            <div class=\\\"modal-content\\\">\\n                <ng-content></ng-content>\\n            </div>\\n        </div>\\n    \"\n    }]\n  }];\n  /** @nocollapse */\n\n  BsModalComponent.ctorParameters = function () {\n    return [{\n      type: ElementRef\n    }, {\n      type: BsModalService\n    }, {\n      type: NgZone\n    }];\n  };\n\n  BsModalComponent.propDecorators = {\n    'animation': [{\n      type: Input\n    }],\n    'backdrop': [{\n      type: Input\n    }],\n    'keyboard': [{\n      type: Input\n    }],\n    'size': [{\n      type: Input\n    }],\n    'cssClass': [{\n      type: Input\n    }],\n    'onShow': [{\n      type: Output\n    }],\n    'onOpen': [{\n      type: Output\n    }],\n    'onHide': [{\n      type: Output\n    }],\n    'onClose': [{\n      type: Output\n    }],\n    'onDismiss': [{\n      type: Output\n    }],\n    'onLoaded': [{\n      type: Output\n    }],\n    'fadeClass': [{\n      type: HostBinding,\n      args: ['class.fade']\n    }],\n    'modalClass': [{\n      type: HostBinding,\n      args: ['class.modal']\n    }],\n    'roleAttr': [{\n      type: HostBinding,\n      args: ['attr.role']\n    }],\n    'tabindexAttr': [{\n      type: HostBinding,\n      args: ['attr.tabindex']\n    }]\n  };\n  return BsModalComponent;\n}();\n\nexport { BsModalComponent };","map":{"version":3,"sources":["/Users/mbalazs/projects/knox/knox-homepage-ui/node_modules/ng2-bs3-modal/modal/modal.js"],"names":["Component","Input","Output","EventEmitter","ElementRef","HostBinding","NgZone","Observable","Subject","BsModalHideType","BsModalSize","BsModalService","EVENT_SUFFIX","SHOW_EVENT_NAME","SHOWN_EVENT_NAME","HIDE_EVENT_NAME","HIDDEN_EVENT_NAME","LOADED_EVENT_NAME","DATA_KEY","BsModalComponent","element","service","zone","_this","overrideSize","onInternalClose$","subscriptions","visible","showing","hiding","animation","backdrop","keyboard","onShow","onOpen","onHide","onClose","onDismiss","onLoaded","setVisible","isVisible","setOptions","options","undefined","add","init","Object","defineProperty","prototype","get","$modal","data","enumerable","configurable","ngOnInit","wireUpEventEmitters","ngAfterViewInit","$dialog","find","ngOnChanges","ngOnDestroy","next","Destroy","destroy","focus","trigger","routerCanDeactivate","RouteChange","open","size","isValidSize","show","toPromise","close","value","Close","hide","do","emit","then","dismiss","Dismiss","getCssClasses","classes","isSmall","push","isLarge","cssClass","join","Large","Small","of","create","o","onShown$","take","subscribe","complete","transitionFix","modal","setTimeout","$","fn","TRANSITION_DURATION","onHidden$","jQuery","nativeElement","appendTo","document","body","onShowEvent$","fromEvent","onShownEvent$","onHideEvent$","onHiddenEvent$","onLoadedEvent$","onClose$","merge","onBackdropClose$","onKeyboardClose$","onHide$","zip","map","x","event","type","focusNext","share","onDismiss$","filter","_a","apply","onModalStack$","wireUpEventEmitter","emitter","stream$","observers","length","sub","run","remove","forEach","s","unsubscribe","decorators","args","selector","template","ctorParameters","propDecorators"],"mappings":"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","sourcesContent":["import { Component, Input, Output, EventEmitter, ElementRef, HostBinding, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport 'rxjs/add/observable/fromEvent';\nimport 'rxjs/add/observable/merge';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/observable/zip';\nimport 'rxjs/add/operator/do';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/share';\nimport 'rxjs/add/operator/take';\nimport 'rxjs/add/operator/toPromise';\nimport { BsModalHideType, BsModalSize } from './models';\nimport { BsModalService } from './modal-service';\nvar EVENT_SUFFIX = 'ng2-bs3-modal';\nvar SHOW_EVENT_NAME = \"show.bs.modal.\" + EVENT_SUFFIX;\nvar SHOWN_EVENT_NAME = \"shown.bs.modal.\" + EVENT_SUFFIX;\nvar HIDE_EVENT_NAME = \"hide.bs.modal.\" + EVENT_SUFFIX;\nvar HIDDEN_EVENT_NAME = \"hidden.bs.modal.\" + EVENT_SUFFIX;\nvar LOADED_EVENT_NAME = \"loaded.bs.modal.\" + EVENT_SUFFIX;\nvar DATA_KEY = 'bs.modal';\nvar BsModalComponent = /** @class */ (function () {\n    function BsModalComponent(element, service, zone) {\n        var _this = this;\n        this.element = element;\n        this.service = service;\n        this.zone = zone;\n        this.overrideSize = null;\n        this.onInternalClose$ = new Subject();\n        this.subscriptions = [];\n        this.visible = false;\n        this.showing = false;\n        this.hiding = false;\n        this.animation = true;\n        this.backdrop = true;\n        this.keyboard = true;\n        this.onShow = new EventEmitter();\n        this.onOpen = new EventEmitter();\n        this.onHide = new EventEmitter();\n        this.onClose = new EventEmitter();\n        this.onDismiss = new EventEmitter();\n        this.onLoaded = new EventEmitter();\n        this.setVisible = function (isVisible) {\n            return function () {\n                _this.visible = isVisible;\n                _this.showing = false;\n                _this.hiding = false;\n            };\n        };\n        this.setOptions = function (options) {\n            var backdrop = options.backdrop;\n            if (typeof backdrop === 'string' && backdrop !== 'static')\n                backdrop = true;\n            if (options.backdrop !== undefined)\n                _this.options.backdrop = backdrop;\n            if (options.keyboard !== undefined)\n                _this.options.keyboard = options.keyboard;\n        };\n        this.service.add(this);\n        this.init();\n    }\n    Object.defineProperty(BsModalComponent.prototype, \"options\", {\n        get: function () {\n            if (!this.$modal)\n                this.init();\n            return this.$modal.data(DATA_KEY).options;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"fadeClass\", {\n        get: function () { return this.animation; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"modalClass\", {\n        get: function () { return true; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"roleAttr\", {\n        get: function () { return 'dialog'; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"tabindexAttr\", {\n        get: function () { return '-1'; },\n        enumerable: true,\n        configurable: true\n    });\n    BsModalComponent.prototype.ngOnInit = function () {\n        this.wireUpEventEmitters();\n    };\n    BsModalComponent.prototype.ngAfterViewInit = function () {\n        this.$dialog = this.$modal.find('.modal-dialog');\n    };\n    BsModalComponent.prototype.ngOnChanges = function () {\n        this.setOptions({\n            backdrop: this.backdrop,\n            keyboard: this.keyboard\n        });\n    };\n    BsModalComponent.prototype.ngOnDestroy = function () {\n        this.onInternalClose$.next(BsModalHideType.Destroy);\n        return this.destroy();\n    };\n    BsModalComponent.prototype.focus = function () {\n        this.$modal.trigger('focus');\n    };\n    BsModalComponent.prototype.routerCanDeactivate = function () {\n        this.onInternalClose$.next(BsModalHideType.RouteChange);\n        return this.destroy();\n    };\n    BsModalComponent.prototype.open = function (size) {\n        this.overrideSize = null;\n        if (BsModalSize.isValidSize(size))\n            this.overrideSize = size;\n        return this.show().toPromise();\n    };\n    BsModalComponent.prototype.close = function (value) {\n        var _this = this;\n        this.onInternalClose$.next(BsModalHideType.Close);\n        return this.hide()\n            .do(function () { return _this.onClose.emit(value); })\n            .toPromise()\n            .then(function () { return value; });\n    };\n    BsModalComponent.prototype.dismiss = function () {\n        this.onInternalClose$.next(BsModalHideType.Dismiss);\n        return this.hide().toPromise();\n    };\n    BsModalComponent.prototype.getCssClasses = function () {\n        var classes = [];\n        if (this.isSmall()) {\n            classes.push('modal-sm');\n        }\n        if (this.isLarge()) {\n            classes.push('modal-lg');\n        }\n        if (this.cssClass) {\n            classes.push(this.cssClass);\n        }\n        return classes.join(' ');\n    };\n    BsModalComponent.prototype.isSmall = function () {\n        return this.overrideSize !== BsModalSize.Large\n            && this.size === BsModalSize.Small\n            || this.overrideSize === BsModalSize.Small;\n    };\n    BsModalComponent.prototype.isLarge = function () {\n        return this.overrideSize !== BsModalSize.Small\n            && this.size === BsModalSize.Large\n            || this.overrideSize === BsModalSize.Large;\n    };\n    BsModalComponent.prototype.show = function () {\n        var _this = this;\n        if (this.visible && !this.hiding)\n            return Observable.of(null);\n        this.showing = true;\n        return Observable.create(function (o) {\n            _this.onShown$.take(1).subscribe(function (next) {\n                o.next(next);\n                o.complete();\n            });\n            _this.transitionFix();\n            _this.$modal.modal('show');\n        });\n    };\n    BsModalComponent.prototype.transitionFix = function () {\n        var _this = this;\n        // Fix for shown.bs.modal not firing when .fade is present\n        // https://github.com/twbs/bootstrap/issues/11793\n        if (this.animation) {\n            setTimeout(function () {\n                _this.$modal.trigger('focus').trigger(SHOWN_EVENT_NAME);\n            }, $.fn.modal['Constructor'].TRANSITION_DURATION);\n        }\n    };\n    BsModalComponent.prototype.hide = function () {\n        var _this = this;\n        if (!this.visible && !this.showing)\n            return Observable.of(null);\n        this.hiding = true;\n        return Observable.create(function (o) {\n            _this.onHidden$.take(1).subscribe(function (next) {\n                o.next(next);\n                o.complete();\n            });\n            _this.$modal.modal('hide');\n        });\n    };\n    BsModalComponent.prototype.init = function () {\n        var _this = this;\n        this.$modal = jQuery(this.element.nativeElement);\n        this.$modal.appendTo(document.body);\n        this.$modal.modal({\n            show: false\n        });\n        this.onShowEvent$ = Observable.fromEvent(this.$modal, SHOW_EVENT_NAME);\n        this.onShownEvent$ = Observable.fromEvent(this.$modal, SHOWN_EVENT_NAME);\n        this.onHideEvent$ = Observable.fromEvent(this.$modal, HIDE_EVENT_NAME);\n        this.onHiddenEvent$ = Observable.fromEvent(this.$modal, HIDDEN_EVENT_NAME);\n        this.onLoadedEvent$ = Observable.fromEvent(this.$modal, LOADED_EVENT_NAME);\n        var onClose$ = Observable\n            .merge(this.onInternalClose$, this.service.onBackdropClose$, this.service.onKeyboardClose$);\n        this.onHide$ = Observable.zip(this.onHideEvent$, onClose$)\n            .map(function (x) { return ({ event: x[0], type: x[1] }); });\n        this.onHidden$ = Observable.zip(this.onHiddenEvent$, onClose$)\n            .map(function (x) { return x[1]; })\n            .do(this.setVisible(false))\n            .do(function () { return _this.service.focusNext(); })\n            .share();\n        this.onShown$ = this.onShownEvent$\n            .do(this.setVisible(true))\n            .share();\n        this.onDismiss$ = this.onHidden$\n            .filter(function (x) { return x !== BsModalHideType.Close; });\n        // Start watching for events\n        (_a = this.subscriptions).push.apply(_a, [\n            this.onShown$.subscribe(function () { }),\n            this.onHidden$.subscribe(function () { }),\n            this.service.onModalStack$.subscribe(function () { })\n        ]);\n        var _a;\n    };\n    BsModalComponent.prototype.wireUpEventEmitters = function () {\n        this.wireUpEventEmitter(this.onShow, this.onShowEvent$);\n        this.wireUpEventEmitter(this.onOpen, this.onShown$);\n        this.wireUpEventEmitter(this.onHide, this.onHide$);\n        this.wireUpEventEmitter(this.onDismiss, this.onDismiss$);\n        this.wireUpEventEmitter(this.onLoaded, this.onLoadedEvent$);\n    };\n    BsModalComponent.prototype.wireUpEventEmitter = function (emitter, stream$) {\n        var _this = this;\n        if (emitter.observers.length === 0)\n            return;\n        var sub = stream$.subscribe(function (next) {\n            _this.zone.run(function () {\n                emitter.next(next);\n            });\n        });\n        this.subscriptions.push(sub);\n    };\n    BsModalComponent.prototype.destroy = function () {\n        var _this = this;\n        return this.hide().do(function () {\n            _this.service.remove(_this);\n            _this.subscriptions.forEach(function (s) { return s.unsubscribe(); });\n            _this.subscriptions = [];\n            if (_this.$modal) {\n                _this.$modal.data(DATA_KEY, null);\n                _this.$modal.remove();\n                _this.$modal = null;\n            }\n        }).toPromise();\n    };\n    BsModalComponent.decorators = [\n        { type: Component, args: [{\n                    selector: 'bs-modal',\n                    template: \"\\n        <div class=\\\"modal-dialog\\\" [ngClass]=\\\"getCssClasses()\\\">\\n            <div class=\\\"modal-content\\\">\\n                <ng-content></ng-content>\\n            </div>\\n        </div>\\n    \"\n                },] },\n    ];\n    /** @nocollapse */\n    BsModalComponent.ctorParameters = function () { return [\n        { type: ElementRef, },\n        { type: BsModalService, },\n        { type: NgZone, },\n    ]; };\n    BsModalComponent.propDecorators = {\n        'animation': [{ type: Input },],\n        'backdrop': [{ type: Input },],\n        'keyboard': [{ type: Input },],\n        'size': [{ type: Input },],\n        'cssClass': [{ type: Input },],\n        'onShow': [{ type: Output },],\n        'onOpen': [{ type: Output },],\n        'onHide': [{ type: Output },],\n        'onClose': [{ type: Output },],\n        'onDismiss': [{ type: Output },],\n        'onLoaded': [{ type: Output },],\n        'fadeClass': [{ type: HostBinding, args: ['class.fade',] },],\n        'modalClass': [{ type: HostBinding, args: ['class.modal',] },],\n        'roleAttr': [{ type: HostBinding, args: ['attr.role',] },],\n        'tabindexAttr': [{ type: HostBinding, args: ['attr.tabindex',] },],\n    };\n    return BsModalComponent;\n}());\nexport { BsModalComponent };\n"]},"metadata":{},"sourceType":"module"}